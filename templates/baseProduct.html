<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- ===== CSS ===== -->
    <link rel="stylesheet" href="/static/pro/assets/css/styles.css">
    <link rel="stylesheet" href="/static/css/styles.css">

    <!-- ===== BOX ICONS ===== -->
    <link href='https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css' rel='stylesheet'>

    <title> {% block title %}{% endblock title %} </title>
    <script type="text/javascript">
        var user = '{{request.user}}'
        function getToken(name) {
            var cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                    var cookie = cookies[i].trim();
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        var csrftoken = getToken(
            'csrftoken'
        );
    </script>
    <script src="https://js.stripe.com/v3/"></script>
    <link rel="icon" href="static/img/lologo.png" type="image/icon type">
</head>

<body>

    <!--===== HEADER =====-->
    <header class="l-header" id="header">
        <nav class="nav bd-grid">
            <div class="nav__toggle" id="nav-toggle">
                <i class='bx bxs-grid'></i>
            </div>

            <a href="/" class="nav__logo">TBW</a>

            <div class="nav__menu" id="nav-menu">
                <ul class="nav__list">
                    <li class="nav__item"><a href="/" class="nav__link active">Home</a></li>
                    <li class="nav__item"><a href="/#featured" class="nav__link">Featured</a></li>
                    <li class="nav__item"><a href="/#women" class="nav__link">#Trending</a></li>
                    <li class="nav__item"><a href="/#new" class="nav__link">New</a></li>
                    <li class="nav__item"><a href= {% url 'shop' %} class="nav__link">Shop</a></li>
                    <li class="nav__item"><a href= {% url 'about' %} class="nav__link">About</a></li>
                </ul>
            </div>

            <div class="nav__shop">
                {% if request.user.is_authenticated %}
                <a href = {% url 'cart' %} class='bx bx-shopping-bag'>{{order.get_cart_items}}</a>
                    <!-- <a style= "font-size:18px;" href= {% url 'logout' %} class="nav__link">{{request.user.username}}</a> -->
                    <div class="dropdown">
                        <button class="dropbtn">Hi, {{request.user.username}}</button>
                        <div class="dropdown-content">
                          <a style="font-size: 14px" href= {% url 'logout' %} >Logout</a>
                          <a style="font-size: 14px" href="/">My orders</a>                                    <!-- Add the link to user's profile page. -->
                        </div>
                      </div>
                {% else %}
                    <a href={% url 'cart' %} class='bx bx-shopping-bag'>{{order.get_cart_items}}</a>
                    <a href= {% url 'login' %}><i class='bx bx-user-circle'></i></a>
                {% endif %}
            </div>

            <!-- <div class="nav__shop"></div> -->
        </nav>
    </header>

    {% block content %}
    
    {% endblock content %}

<script src="../../assets/js/main.js"></script>
    <script>
        const imgs = document.querySelectorAll('.img-select a');
        const imgBtns = [...imgs];
        let imgId = 1;

        imgBtns.forEach((imgItem) => {
            imgItem.addEventListener('click', (event) => {
                event.preventDefault();
                imgId = imgItem.dataset.id;
                slideImage();
            });
        });

        function slideImage() {
            const displayWidth = document.querySelector('.img-showcase img:first-child').clientWidth;

            document.querySelector('.img-showcase').style.transform = `translateX(${- (imgId - 1) * displayWidth}px)`;
        }

        window.addEventListener('resize', slideImage);
    </script>

    <script src="/static/js/product.js"></script>
</body>

</html>